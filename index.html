<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í•˜í•˜ íŒ¨ë°€ë¦¬ë¥¼ ì§€ì¼œë¼!</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: "Helvetica Neue", Arial, sans-serif; background:#f2f7ff; display:flex; justify-content:center; align-items:center; min-height:100vh; }
    #game-wrapper { width: 100%; max-width: 420px; background:white; border-radius:1rem; box-shadow:0 4px 12px rgba(0,0,0,.15); padding:1.5rem; display:flex; flex-direction:column; gap:1rem; }
    h1 { margin:0 0 .5rem 0; text-align:center; font-size:1.75rem; }
    #family-photo { width:100%; max-height:160px; object-fit:cover; border-radius:.5rem; }
    #house-status { text-align:center; font-size:1.4rem; }
    #question { text-align:center; font-size:1.3rem; margin:1rem 0; font-weight:600; }
    .options { display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
    .option-btn { padding:.75rem .5rem; background:#f0f4ff; border:none; border-radius:.75rem; font-size:1.05rem; cursor:pointer; transition:all .2s; }
    .option-btn:hover { transform:translateY(-2px); box-shadow:0 2px 6px rgba(0,0,0,.15); }
    .option-btn.correct { background:#d4f5cb; }
    .option-btn.wrong { background:#ffdedf; }
    #stage-info { text-align:center; font-size:.95rem; color:#333; }
    #start-screen, #end-screen { display:flex; flex-direction:column; gap:1rem; }
    #name-input { padding:.75rem 1rem; border:1px solid #ccc; border-radius:.75rem; font-size:1rem; }
    .primary-btn { padding:.75rem 1rem; background:#4b6bff; color:white; border:none; border-radius:.75rem; font-size:1.05rem; cursor:pointer; transition:background .2s; }
    .primary-btn:hover { background:#3958ff; }
    #scoreboard-table { width:100%; border-collapse:collapse; font-size:.9rem; }
    #scoreboard-table th, #scoreboard-table td { border:1px solid #ddd; padding:.35rem .5rem; text-align:center; }
    #scoreboard-table th { background:#eef3ff; }
  </style>
</head>
<body>
  <div id="game-wrapper">
    <h1>í•˜í•˜ íŒ¨ë°€ë¦¬ë¥¼ ì§€ì¼œë¼!</h1>
    <img id="family-photo" src="family.jpg" alt="ìš°ë¦¬ ê°€ì¡±" />

    <!-- Start Screen -->
    <div id="start-screen">
      <input id="name-input" type="text" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
      <button id="start-btn" class="primary-btn">ê²Œì„ ì‹œì‘</button>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" style="display:none;flex-direction:column;gap:1rem;">
      <div id="stage-info"></div>
      <div id="house-status"></div>
      <div id="question"></div>
      <div id="options" class="options"></div>
    </div>

    <!-- End Screen -->
    <div id="end-screen" style="display:none;flex-direction:column;gap:1rem;">
      <div id="final-msg" style="text-align:center;font-size:1.1rem;"></div>
      <button id="restart-btn" class="primary-btn">ë‹¤ì‹œ í•˜ê¸°</button>
      <h3 style="text-align:center;margin:0;">ìŠ¤ì½”ì–´ ë³´ë“œ</h3>
      <table id="scoreboard-table"></table>
    </div>
  </div>

  <script>
    /*=============== ê²Œì„ ë°ì´í„° ===============*/
    const STAGES = [
      // Stage 1
      [
        { en: "cat", ko: "ê³ ì–‘ì´" }, { en: "dog", ko: "ê°œ" }, { en: "bird", ko: "ìƒˆ" }, { en: "fish", ko: "ë¬¼ê³ ê¸°" },
        { en: "ant", ko: "ê°œë¯¸" }, { en: "bee", ko: "ë²Œ" }, { en: "pig", ko: "ë¼ì§€" }, { en: "cow", ko: "ì†Œ" },
        { en: "duck", ko: "ì˜¤ë¦¬" }, { en: "hen", ko: "ì•”íƒ‰" }, { en: "egg", ko: "ë‹¬ê±€" }, { en: "milk", ko: "ìš°ìœ " },
        { en: "book", ko: "ì±…" }, { en: "pen", ko: "íœ" }, { en: "bag", ko: "ê°€ë°©" }, { en: "bed", ko: "ì¹¨ëŒ€" },
        { en: "sun", ko: "í•´" }, { en: "moon", ko: "ë‹¬" }, { en: "star", ko: "ë³„" }, { en: "ball", ko: "ê³µ" }
      ],
      // Stage 2
      [
        { en: "mom", ko: "ì—„ë§ˆ" }, { en: "dad", ko: "ì•„ë¹ " }, { en: "brother", ko: "í˜•" }, { en: "sister", ko: "ëˆ„ë‚˜" },
        { en: "baby", ko: "ì•„ê¸°" }, { en: "grandpa", ko: "í• ì•„ë²„ì§€" }, { en: "grandma", ko: "í• ë¨¸ë‹ˆ" }, { en: "hand", ko: "ì†" },
        { en: "foot", ko: "ë°œ" }, { en: "leg", ko: "ë‹¤ë¦¬" }, { en: "arm", ko: "íŒ”" }, { en: "head", ko: "ë¨¸ë¦¬" },
        { en: "eye", ko: "ëˆˆ" }, { en: "nose", ko: "ì½”" }, { en: "mouth", ko: "ì…" }, { en: "ear", ko: "ê·€" },
        { en: "hair", ko: "ë¨¸ë¦¬ì¹´ë½" }, { en: "face", ko: "ì–¼êµ´" }, { en: "tooth", ko: "ì´" }, { en: "finger", ko: "ì†ê°€ë½" }
      ],
      // Stage 3
      [
        { en: "red", ko: "ë¹¨ê°•" }, { en: "blue", ko: "íŒŒë‘" }, { en: "green", ko: "ì´ˆë¡" }, { en: "yellow", ko: "ë…¸ë‘" },
        { en: "orange", ko: "ì£¼í™©" }, { en: "purple", ko: "ë³´ë¼" }, { en: "pink", ko: "ë¶„í™" }, { en: "black", ko: "ê²€ì •" },
        { en: "white", ko: "í°ìƒ‰" }, { en: "brown", ko: "ê°ˆìƒ‰" }, { en: "one", ko: "í•˜ë‚˜" }, { en: "two", ko: "ë‘˜" },
        { en: "three", ko: "ì…‹" }, { en: "four", ko: "ë„·" }, { en: "five", ko: "ë‹¤ì„¯" }, { en: "six", ko: "ì—¬ì„¯" },
        { en: "seven", ko: "ì¼ê³±" }, { en: "eight", ko: "ì—¬ëŸ" }, { en: "nine", ko: "ì•„í™‰" }, { en: "ten", ko: "ì—´" }
      ],
      // Stage 4
      [
        { en: "rice", ko: "ë°¥" }, { en: "bread", ko: "ë¹µ" }, { en: "soup", ko: "ìˆ˜í”„" }, { en: "meat", ko: "ê³ ê¸°" },
        { en: "chicken", ko: "ë‹­ê³ ê¸°" }, { en: "apple", ko: "ì‚¬ê³¼" }, { en: "banana", ko: "ë°”ë‚˜ë‚˜" }, { en: "grape", ko: "í¬ë„" },
        { en: "orangefruit", ko: "ì˜¤ë Œì§€" }, { en: "lemon", ko: "ë ˆëª¬" }, { en: "carrot", ko: "ë‹¹ê·¼" }, { en: "potato", ko: "ê°ì" },
        { en: "tomato", ko: "í† ë§ˆí† " }, { en: "corn", ko: "ì˜¥ìˆ˜ìˆ˜" }, { en: "water", ko: "ë¬¼" }, { en: "juice", ko: "ì£¼ìŠ¤" },
        { en: "tea", ko: "ì°¨" }, { en: "soda", ko: "íƒ„ì‚°ìŒë£Œ" }, { en: "sugar", ko: "ì„¤íƒ•" }, { en: "salt", ko: "ì†Œê¸ˆ" }
      ],
      // Stage 5
      [
        { en: "school", ko: "í•™êµ" }, { en: "class", ko: "ìˆ˜ì—…" }, { en: "teacher", ko: "ì„ ìƒë‹˜" }, { en: "student", ko: "í•™ìƒ" },
        { en: "desk", ko: "ì±…ìƒ" }, { en: "chair", ko: "ì˜ì" }, { en: "pencil", ko: "ì—°í•„" }, { en: "ruler", ko: "ì" },
        { en: "eraser", ko: "ì§€ìš°ê°œ" }, { en: "paper", ko: "ì¢…ì´" }, { en: "notebook", ko: "ê³µì±…" }, { en: "backpack", ko: "ë°°ë‚­" },
        { en: "clock", ko: "ì‹œê³„" }, { en: "door", ko: "ë¬¸" }, { en: "window", ko: "ì°½ë¬¸" }, { en: "computer", ko: "ì»´í“¨í„°" },
        { en: "marker", ko: "ë§ˆì»¤" }, { en: "board", ko: "ì¹ íŒ" }, { en: "bell", ko: "ì¢…" }, { en: "map", ko: "ì§€ë„" }
      ],
      // Stage 6
      [
        { en: "go", ko: "ê°€ë‹¤" }, { en: "come", ko: "ì˜¤ë‹¤" }, { en: "see", ko: "ë³´ë‹¤" }, { en: "look", ko: "ì³ë‹¤ë³´ë‹¤" },
        { en: "eat", ko: "ë¨¹ë‹¤" }, { en: "drink", ko: "ë§ˆì‹œë‹¤" }, { en: "run", ko: "ë‹¬ë¦¬ë‹¤" }, { en: "walk", ko: "ê±·ë‹¤" },
        { en: "jump", ko: "ë›°ë‹¤" }, { en: "sit", ko: "ì•‰ë‹¤" }, { en: "stand", ko: "ì„œë‹¤" }, { en: "read", ko: "ì½ë‹¤" },
        { en: "write", ko: "ì“°ë‹¤" }, { en: "play", ko: "ë†€ë‹¤" }, { en: "sing", ko: "ë…¸ë˜í•˜ë‹¤" }, { en: "dance", ko: "ì¶¤ì¶”ë‹¤" },
        { en: "sleep", ko: "ìë‹¤" }, { en: "smile", ko: "ì›ƒë‹¤" }, { en: "cry", ko: "ìš¸ë‹¤" }, { en: "help", ko: "ë•ë‹¤" }
      ],
      // Stage 7
      [
        { en: "big", ko: "í°" }, { en: "small", ko: "ì‘ì€" }, { en: "tall", ko: "í‚¤í°" }, { en: "short", ko: "í‚¤ì‘ì€" },
        { en: "long", ko: "ê¸´" }, { en: "fast", ko: "ë¹ ë¥¸" }, { en: "slow", ko: "ëŠë¦°" }, { en: "hot", ko: "ëœ¨ê±°ìš´" },
        { en: "cold", ko: "ì°¨ê°€ìš´" }, { en: "warm", ko: "ë”°ëœ»í•œ" }, { en: "happy", ko: "í–‰ë³µí•œ" }, { en: "sad", ko: "ìŠ¬í”ˆ" },
        { en: "good", ko: "ì¢‹ì€" }, { en: "bad", ko: "ë‚˜ìœ" }, { en: "easy", ko: "ì‰¬ìš´" }, { en: "hard", ko: "ì–´ë ¤ìš´" },
        { en: "clean", ko: "ê¹¨ë—í•œ" }, { en: "dirty", ko: "ë”ëŸ¬ìš´" }, { en: "new", ko: "ìƒˆë¡œìš´" }, { en: "old", ko: "ë‚¡ì€" }
      ],
      // Stage 8
      [
        { en: "home", ko: "ì§‘" }, { en: "park", ko: "ê³µì›" }, { en: "zoo", ko: "ë™ë¬¼ì›" }, { en: "farm", ko: "ë†ì¥" },
        { en: "bank", ko: "ì€í–‰" }, { en: "hospital", ko: "ë³‘ì›" }, { en: "store", ko: "ê°€ê²Œ" }, { en: "market", ko: "ì‹œì¥" },
        { en: "church", ko: "êµíšŒ" }, { en: "post", ko: "ìš°ì²´êµ­" }, { en: "airport", ko: "ê³µí•­" }, { en: "bus", ko: "ë²„ìŠ¤ì •ë¥˜ì¥" },
        { en: "station", ko: "ì—­" }, { en: "street", ko: "ê±°ë¦¬" }, { en: "road", ko: "ë„ë¡œ" }, { en: "bridge", ko: "ë‹¤ë¦¬" },
        { en: "river", ko: "ê°•" }, { en: "mountain", ko: "ì‚°" }, { en: "beach", ko: "í•´ë³€" }, { en: "playground", ko: "ë†€ì´í„°" }
      ],
      // Stage 9
      [
        { en: "day", ko: "ë‚®" }, { en: "night", ko: "ë°¤" }, { en: "morning", ko: "ì•„ì¹¨" }, { en: "afternoon", ko: "ì˜¤í›„" },
        { en: "evening", ko: "ì €ë…" }, { en: "today", ko: "ì˜¤ëŠ˜" }, { en: "tomorrow", ko: "ë‚´ì¼" }, { en: "yesterday", ko: "ì–´ì œ" },
        { en: "week", ko: "ì£¼" }, { en: "month", ko: "ë‹¬" }, { en: "year", ko: "ë…„" }, { en: "spring", ko: "ë´„" },
        { en: "summer", ko: "ì—¬ë¦„" }, { en: "autumn", ko: "ê°€ì„" }, { en: "winter", ko: "ê²¨ìš¸" }, { en: "sunny", ko: "ë§‘ì€" },
        { en: "rainy", ko: "ë¹„ì˜¤ëŠ”" }, { en: "cloudy", ko: "íë¦°" }, { en: "snowy", ko: "ëˆˆì˜¤ëŠ”" }, { en: "windy", ko: "ë°”ëŒë¶€ëŠ”" }
      ],
      // Stage 10
      [
        { en: "phone", ko: "ì „í™”ê¸°" }, { en: "toy", ko: "ì¥ë‚œê°" }, { en: "picture", ko: "ê·¸ë¦¼" }, { en: "key", ko: "ì—´ì‡ " },
        { en: "box", ko: "ìƒì" }, { en: "gift", ko: "ì„ ë¬¼" }, { en: "money", ko: "ëˆ" }, { en: "card", ko: "ì¹´ë“œ" },
        { en: "ticket", ko: "í‹°ì¼“" }, { en: "music", ko: "ìŒì•…" }, { en: "movie", ko: "ì˜í™”" }, { en: "game", ko: "ê²Œì„" },
        { en: "idea", ko: "ì•„ì´ë””ì–´" }, { en: "love", ko: "ì‚¬ë‘" }, { en: "ride", ko: "íƒ€ë‹¤" }, { en: "open", ko: "ì—´ë‹¤" },
        { en: "close", ko: "ë‹«ë‹¤" }, { en: "wait", ko: "ê¸°ë‹¤ë¦¬ë‹¤" }, { en: "think", ko: "ìƒê°í•˜ë‹¤" }, { en: "learn", ko: "ë°°ìš°ë‹¤" }
      ]
    ];

    const DARK_POKEMON = [
      "Umbreon", "Darkrai", "Absol", "Hydreigon", "Tyranitar", "Zoroark", "Weavile", "Honchkrow", "Yveltal", "Incineroar"
    ];

    /*=============== ì „ì—­ ë³€ìˆ˜ ===============*/
    let playerName = "";
    let stageIdx = 0;
    let lives = 5;
    let correctThisStage = 0;

    /*=============== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ===============*/
    const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);
    const $(id) => document.querySelector(id);

    /*=============== DOM ìš”ì†Œ ===============*/
    const startScreen = document.getElementById("start-screen");
    const gameScreen = document.getElementById("game-screen");
    const endScreen = document.getElementById("end-screen");
    const nameInput = document.getElementById("name-input");
    const startBtn = document.getElementById("start-btn");
    const restartBtn = document.getElementById("restart-btn");

    const stageInfoEl = document.getElementById("stage-info");
    const houseStatusEl = document.getElementById("house-status");
    const questionEl = document.getElementById("question");
    const optionsEl = document.getElementById("options");

    const finalMsgEl = document.getElementById("final-msg");
    const scoreboardTable = document.getElementById("scoreboard-table");

    /*=============== ê²Œì„ ë¡œì§ ===============*/
    let currentWords = [];
    let currentWordIdx = 0;

    function startGame() {
      playerName = nameInput.value.trim() || "Player";
      stageIdx = 0;
      loadStage();
      startScreen.style.display = "none";
      endScreen.style.display = "none";
      gameScreen.style.display = "flex";
    }

    function loadStage() {
      lives = 5;
      correctThisStage = 0;
      currentWords = shuffle([...STAGES[stageIdx]]);
      currentWordIdx = 0;
      updateHouse();
      stageInfoEl.textContent = `ë‹¨ê³„ ${stageIdx + 1} / 10`;
      nextQuestion();
    }

    function nextQuestion() {
      if (correctThisStage === 20) {
        // Stage clear
        stageIdx++;
        if (stageIdx >= STAGES.length) {
          // Game clear!
          finishGame(true);
          return;
        }
        loadStage();
        return;
      }

      const word = currentWords[currentWordIdx];
      questionEl.textContent = `"${word.en}" ì˜ ëœ»ì€?`;

      // ë§Œë“¤ ë³´ê¸°
      let choices = [word.ko];
      while (choices.length < 4) {
        const randStage = STAGES[Math.floor(Math.random() * STAGES.length)];
        const randWord = randStage[Math.floor(Math.random() * randStage.length)];
        if (!choices.includes(randWord.ko)) choices.push(randWord.ko);
      }
      shuffle(choices);

      // ë Œë” ë³´ê¸°
      optionsEl.innerHTML = "";
      choices.forEach((choice) => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.className = "option-btn";
        btn.onclick = () => handleChoice(btn, choice === word.ko);
        optionsEl.appendChild(btn);
      });
    }

    function handleChoice(btn, isCorrect) {
      Array.from(optionsEl.children).forEach((b) => (b.disabled = true));
      if (isCorrect) {
        btn.classList.add("correct");
        correctThisStage++;
        currentWordIdx = (currentWordIdx + 1) % currentWords.length;
        setTimeout(nextQuestion, 800);
      } else {
        btn.classList.add("wrong");
        lives--;
        houseStatusEl.textContent += `\n${randomPokemon()} ì˜ ê³µê²©!`;
        updateHouse();
        if (lives === 0) {
          finishGame(false);
        } else {
          setTimeout(nextQuestion, 1000);
        }
      }
    }

    function updateHouse() {
      const full = "ğŸ ".repeat(lives);
      const broken = "ğŸ’¥".repeat(5 - lives);
      houseStatusEl.textContent = full + broken;
    }

    function randomPokemon() {
      return DARK_POKEMON[Math.floor(Math.random() * DARK_POKEMON.length)];
    }

    function finishGame(cleared) {
      gameScreen.style.display = "none";
      endScreen.style.display = "flex";
      const resultText = cleared
        ? `${playerName} ë‹˜, ì¶•í•˜í•©ë‹ˆë‹¤! 10ë‹¨ê³„ë¥¼ ëª¨ë‘ ì§€ì¼œëƒˆì–´ìš”!`
        : `${playerName} ë‹˜, ë‹¨ê³„ ${stageIdx + 1}ì—ì„œ ë¬´ë„ˆì¡Œì–´ìš”... (ë§ì¶˜ ë‹¨ì–´ ${correctThisStage}/20)`;
      finalMsgEl.textContent = resultText;
      saveScore(playerName, stageIdx + 1, correctThisStage);
      renderScoreboard();
    }

    /*=============== ìŠ¤ì½”ì–´ ë³´ë“œ ===============*/
    function getScores() {
      return JSON.parse(localStorage.getItem("hahaScores") || "[]");
    }
    function saveScore(name, stage, correct) {
      const scores = getScores();
      scores.push({ name, stage, correct, date: Date.now() });
      localStorage.setItem("hahaScores", JSON.stringify(scores.slice(-20))); // ìµœê·¼ 20ê°œë§Œ ì €ì¥
    }
    function renderScoreboard() {
      const scores = getScores().sort((a,b)=>b.date - a.date);
      scoreboardTable.innerHTML = "<tr><th>ì´ë¦„</th><th>ë‹¨ê³„</th><th>ë§ì¶˜ ë‹¨ì–´ìˆ˜</th></tr>" +
        scores.map(s => `<tr><td>${s.name}</td><td>${s.stage}</td><td>${s.correct}</td></tr>`).join("");
    }

    /*=============== ì´ë²¤íŠ¸ ë°”ì¸ë”© ===============*/
    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", () => {
      startScreen.style.display = "flex";
      endScreen.style.display = "none";
    });
  </script>
</body>
</html>
